
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://klust.github.io/LUMI-BE-training-materials/intro-evolving/Demo1/">
      
      
        <link rel="prev" href="../11-Containers/">
      
      
        <link rel="next" href="../Demo2/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Container demo 1 - LUMI-BE training materials</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--demo:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20384%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20192h176V0h-16C71.6%200%200%2071.6%200%20160zm0%2032v128c0%2088.4%2071.6%20160%20160%20160h64c88.4%200%20160-71.6%20160-160V224H0m384-32v-32C384%2071.6%20312.4%200%20224%200h-16v192z%22/%3E%3C/svg%3E');--md-admonition-icon--exercise:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M78.6%205c-9.5-7.4-23-6.5-31.6%202L7%2047c-8.5%208.5-9.4%2022-2.1%2031.6l80%20104c4.5%205.9%2011.6%209.4%2019%209.4H158l109%20109c-14.7%2029-10%2065.4%2014.3%2089.6l112%20112c12.5%2012.5%2032.8%2012.5%2045.3%200l64-64c12.5-12.5%2012.5-32.8%200-45.3l-112-112c-24.2-24.2-60.6-29-89.6-14.3L192%20158v-54.1c0-7.5-3.5-14.5-9.4-19zM19.9%20396.1C7.2%20408.8%200%20426.1%200%20444.1%200%20481.6%2030.4%20512%2067.9%20512c18%200%2035.3-7.2%2048-19.9l117.8-117.8c-7.8-20.9-9-43.6-3.6-65.1l-61.7-61.7zM512%20144c0-10.5-1.1-20.7-3.2-30.5-2.4-11.2-16.1-14.1-24.2-6l-63.9%2063.9c-3%203-7.1%204.7-11.3%204.7L352%20176c-8.8%200-16-7.2-16-16v-57.4c0-4.2%201.7-8.3%204.7-11.3l63.9-63.9c8.1-8.1%205.2-21.8-6-24.2C388.7%201.1%20378.5%200%20368%200c-79.5%200-144%2064.5-144%20144v.8l85.3%2085.3c36-9.1%2075.8.5%20104%2028.7l15.7%2015.7c49-23%2083-72.8%2083-130.5M56%20432a24%2024%200%201%201%2048%200%2024%2024%200%201%201-48%200%22/%3E%3C/svg%3E');--md-admonition-icon--remark:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20448c141.4%200%20256-93.1%20256-208S397.4%2032%20256%2032%200%20125.1%200%20240c0%2045.1%2017.7%2086.8%2047.7%20120.9-1.9%2024.5-11.4%2046.3-21.4%2062.9-5.5%209.2-11.1%2016.6-15.2%2021.6-2.1%202.5-3.7%204.4-4.9%205.7-.6.6-1%201.1-1.3%201.4l-.3.3c-4.6%204.6-5.9%2011.4-3.4%2017.4s8.3%209.9%2014.8%209.9c28.7%200%2057.6-8.9%2081.6-19.3%2022.9-10%2042.4-21.9%2054.3-30.6%2031.8%2011.5%2067%2017.9%20104.1%2017.9zM128%20208a32%2032%200%201%201%200%2064%2032%2032%200%201%201%200-64m128%200a32%2032%200%201%201%200%2064%2032%2032%200%201%201%200-64m96%2032a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M320%200c17.7%200%2032%2014.3%2032%2032v64h120c39.8%200%2072%2032.2%2072%2072v272c0%2039.8-32.2%2072-72%2072H168c-39.8%200-72-32.2-72-72V168c0-39.8%2032.2-72%2072-72h120V32c0-17.7%2014.3-32%2032-32M208%20384c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016h32c8.8%200%2016-7.2%2016-16s-7.2-16-16-16zm96%200c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016h32c8.8%200%2016-7.2%2016-16s-7.2-16-16-16zm96%200c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016h32c8.8%200%2016-7.2%2016-16s-7.2-16-16-16zM264%20256a40%2040%200%201%200-80%200%2040%2040%200%201%200%2080%200m152%2040a40%2040%200%201%200%200-80%2040%2040%200%201%200%200%2080M48%20224h16v192H48c-26.5%200-48-21.5-48-48v-96c0-26.5%2021.5-48%2048-48m544%200c26.5%200%2048%2021.5%2048%2048v96c0%2026.5-21.5%2048-48%2048h-16V224z%22/%3E%3C/svg%3E');--md-admonition-icon--audience:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M72%2088a56%2056%200%201%201%20112%200%2056%2056%200%201%201-112%200m-8%20157.7c-10%2011.2-16%2026.1-16%2042.3s6%2031.1%2016%2042.3v-84.7zm144.4-49.3C178.7%20222.7%20160%20261.2%20160%20304c0%2034.3%2012%2065.8%2032%2090.5V416c0%2017.7-14.3%2032-32%2032H96c-17.7%200-32-14.3-32-32v-26.8C26.2%20371.2%200%20332.7%200%20288c0-61.9%2050.1-112%20112-112h32c24%200%2046.2%207.5%2064.4%2020.3zM448%20416v-21.5c20-24.7%2032-56.2%2032-90.5%200-42.8-18.7-81.3-48.4-107.7C449.8%20183.5%20472%20176%20496%20176h32c61.9%200%20112%2050.1%20112%20112%200%2044.7-26.2%2083.2-64%20101.2V416c0%2017.7-14.3%2032-32%2032h-64c-17.7%200-32-14.3-32-32m8-328a56%2056%200%201%201%20112%200%2056%2056%200%201%201-112%200m120%20157.7v84.7c10-11.3%2016-26.1%2016-42.3s-6-31.1-16-42.3zM320%2032a64%2064%200%201%201%200%20128%2064%2064%200%201%201%200-128m-80%20272c0%2016.2%206%2031%2016%2042.3v-84.7c-10%2011.3-16%2026.1-16%2042.3zm144-42.3v84.7c10-11.3%2016-26.1%2016-42.3s-6-31.1-16-42.3zm64%2042.3c0%2044.7-26.2%2083.2-64%20101.2V448c0%2017.7-14.3%2032-32%2032h-64c-17.7%200-32-14.3-32-32v-42.8c-37.8-18-64-56.5-64-101.2%200-61.9%2050.1-112%20112-112h32c61.9%200%20112%2050.1%20112%20112%22/%3E%3C/svg%3E');--md-admonition-icon--solution:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M234.7%2042.7%20197%2056.8c-3%201.1-5%204-5%207.2s2%206.1%205%207.2l37.7%2014.1%2014.1%2037.7c1.1%203%204%205%207.2%205s6.1-2%207.2-5l14.1-37.7L315%2071.2c3-1.1%205-4%205-7.2s-2-6.1-5-7.2l-37.7-14.1L263.2%205c-1.1-3-4-5-7.2-5s-6.1%202-7.2%205zM46.1%20395.4c-18.7%2018.7-18.7%2049.1%200%2067.9l34.6%2034.6c18.7%2018.7%2049.1%2018.7%2067.9%200l381.3-381.4c18.7-18.7%2018.7-49.1%200-67.9l-34.6-34.5c-18.7-18.7-49.1-18.7-67.9%200zM484.6%2082.6l-105%20105-23.3-23.3%20105-105zM7.5%20117.2C3%20118.9%200%20123.2%200%20128s3%209.1%207.5%2010.8L64%20160l21.2%2056.5c1.7%204.5%206%207.5%2010.8%207.5s9.1-3%2010.8-7.5L128%20160l56.5-21.2c4.5-1.7%207.5-6%207.5-10.8s-3-9.1-7.5-10.8L128%2096l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1%203-10.8%207.5L64%2096zm352%20256c-4.5%201.7-7.5%206-7.5%2010.8s3%209.1%207.5%2010.8L416%20416l21.2%2056.5c1.7%204.5%206%207.5%2010.8%207.5s9.1-3%2010.8-7.5L480%20416l56.5-21.2c4.5-1.7%207.5-6%207.5-10.8s-3-9.1-7.5-10.8L480%20352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1%203-10.8%207.5L416%20352z%22/%3E%3C/svg%3E');--md-admonition-icon--seealso:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M579.8%20267.7c56.5-56.5%2056.5-148%200-204.5-50-50-128.8-56.5-186.3-15.4l-1.6%201.1c-14.4%2010.3-17.7%2030.3-7.4%2044.6s30.3%2017.7%2044.6%207.4l1.6-1.1c32.1-22.9%2076-19.3%20103.8%208.6%2031.5%2031.5%2031.5%2082.5%200%20114L422.3%20334.8c-31.5%2031.5-82.5%2031.5-114%200-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4%206.9-34.4-7.4-44.6s-34.4-6.9-44.6%207.4l-1.1%201.6C206.5%20251.2%20213%20330%20263%20380c56.5%2056.5%20148%2056.5%20204.5%200zM60.2%20244.3c-56.5%2056.5-56.5%20148%200%20204.5%2050%2050%20128.8%2056.5%20186.3%2015.4l1.6-1.1c14.4-10.3%2017.7-30.3%207.4-44.6s-30.3-17.7-44.6-7.4l-1.6%201.1c-32.1%2022.9-76%2019.3-103.8-8.6C74%20372%2074%20321%20105.5%20289.5l112.2-112.3c31.5-31.5%2082.5-31.5%20114%200%2027.9%2027.9%2031.5%2071.8%208.6%20103.9l-1.1%201.6c-10.3%2014.4-6.9%2034.4%207.4%2044.6s34.4%206.9%2044.6-7.4l1.1-1.6C433.5%20260.8%20427%20182%20377%20132c-56.5-56.5-148-56.5-204.5%200z%22/%3E%3C/svg%3E');--md-admonition-icon--technical:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M160%2096a96%2096%200%201%201%20192%200%2096%2096%200%201%201-192%200m80%20152v264l-48.4-24.2c-20.9-10.4-43.5-17-66.8-19.3l-96-9.6C12.5%20457.2%200%20443.5%200%20427V224c0-17.7%2014.3-32%2032-32h30.3c63.6%200%20125.6%2019.6%20177.7%2056m32%20264V248c52.1-36.4%20114.1-56%20177.7-56H480c17.7%200%2032%2014.3%2032%2032v203c0%2016.4-12.5%2030.2-28.8%2031.8l-96%209.6c-23.2%202.3-45.9%208.9-66.8%2019.3z%22/%3E%3C/svg%3E');--md-admonition-icon--intermediate:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M320%2032c-8.1%200-16.1%201.4-23.7%204.1L15.8%20137.4C6.3%20140.9%200%20149.9%200%20160s6.3%2019.1%2015.8%2022.6l57.9%2020.9C57.3%20229.3%2048%20259.8%2048%20291.9V320c0%2028.4-10.8%2057.7-22.3%2080.8-6.5%2013-13.9%2025.8-22.5%2037.6-3.2%204.3-4.1%209.9-2.3%2015s6%208.9%2011.2%2010.2l64%2016c4.2%201.1%208.7.3%2012.4-2s6.3-6.1%207.1-10.4c8.6-42.8%204.3-81.2-2.1-108.7-3.2-14.2-7.5-28.7-13.5-42v-24.6c0-30.2%2010.2-58.7%2027.9-81.5%2012.9-15.5%2029.6-28%2049.2-35.7l157-61.7c8.2-3.2%2017.5.8%2020.7%209s-.8%2017.5-9%2020.7l-157%2061.7c-12.4%204.9-23.3%2012.4-32.2%2021.6l159.6%2057.6c7.6%202.7%2015.6%204.1%2023.7%204.1s16.1-1.4%2023.7-4.1l280.6-101c9.5-3.4%2015.8-12.5%2015.8-22.6s-6.3-19.1-15.8-22.6L343.7%2036.1c-7.6-2.7-15.6-4.1-23.7-4.1M128%20408c0%2035.3%2086%2072%20192%2072s192-36.7%20192-72l-15.3-145.4L354.5%20314c-11.1%204-22.8%206-34.5%206s-23.5-2-34.5-6l-142.2-51.4z%22/%3E%3C/svg%3E');--md-admonition-icon--advanced:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M219.3.5c3.1-.6%206.3-.6%209.4%200l200%2040C439.9%2042.7%20448%2052.6%20448%2064s-8.1%2021.3-19.3%2023.5L352%20102.9V160c0%2070.7-57.3%20128-128%20128S96%20230.7%2096%20160v-57.1l-48-9.6v65.1l15.7%2078.4c.9%204.7-.3%209.6-3.3%2013.3S52.8%20256%2048%20256H16c-4.8%200-9.3-2.1-12.4-5.9s-4.3-8.6-3.3-13.3L16%20158.4V86.6C6.5%2083.3%200%2074.3%200%2064c0-11.4%208.1-21.3%2019.3-23.5zM111.9%20327.7c10.5-3.4%2021.8.4%2029.4%208.5l71%2075.5c6.3%206.7%2017%206.7%2023.3%200l71-75.5c7.6-8.1%2018.9-11.9%2029.4-8.5%2065%2020.9%20112%2081.7%20112%20153.6%200%2017-13.8%2030.7-30.7%2030.7H30.7C13.8%20512%200%20498.2%200%20481.3c0-71.9%2047-132.7%20111.9-153.6%22/%3E%3C/svg%3E');--md-admonition-icon--lumi-be:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M48%200C21.5%200%200%2021.5%200%2048v416c0%2026.5%2021.5%2048%2048%2048h96v-80c0-26.5%2021.5-48%2048-48s48%2021.5%2048%2048v80h96c26.5%200%2048-21.5%2048-48V48c0-26.5-21.5-48-48-48zm16%20240c0-8.8%207.2-16%2016-16h32c8.8%200%2016%207.2%2016%2016v32c0%208.8-7.2%2016-16%2016H80c-8.8%200-16-7.2-16-16zm112-16h32c8.8%200%2016%207.2%2016%2016v32c0%208.8-7.2%2016-16%2016h-32c-8.8%200-16-7.2-16-16v-32c0-8.8%207.2-16%2016-16m80%2016c0-8.8%207.2-16%2016-16h32c8.8%200%2016%207.2%2016%2016v32c0%208.8-7.2%2016-16%2016h-32c-8.8%200-16-7.2-16-16zM80%2096h32c8.8%200%2016%207.2%2016%2016v32c0%208.8-7.2%2016-16%2016H80c-8.8%200-16-7.2-16-16v-32c0-8.8%207.2-16%2016-16m80%2016c0-8.8%207.2-16%2016-16h32c8.8%200%2016%207.2%2016%2016v32c0%208.8-7.2%2016-16%2016h-32c-8.8%200-16-7.2-16-16zm112-16h32c8.8%200%2016%207.2%2016%2016v32c0%208.8-7.2%2016-16%2016h-32c-8.8%200-16-7.2-16-16v-32c0-8.8%207.2-16%2016-16M448%200c-17.7%200-32%2014.3-32%2032v480h64V192h144c8.8%200%2016-7.2%2016-16V48c0-8.8-7.2-16-16-16H480c0-17.7-14.3-32-32-32%22/%3E%3C/svg%3E');--md-admonition-icon--nice-to-know:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20384%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%206.7.2%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202024%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M297.2%20248.9c14.4-20.6%2022.8-45.7%2022.8-72.9%200-70.7-57.3-128-128-128S64%20105.3%2064%20176c0%2027.2%208.4%2052.3%2022.8%2072.9%203.7%205.3%208.1%2011.3%2012.8%2017.7%2012.9%2017.7%2028.3%2038.9%2039.8%2059.8%2010.4%2019%2015.7%2038.8%2018.3%2057.5l-48.7.1c-2.2-12-5.9-23.7-11.8-34.5-9.9-18-22.2-34.9-34.5-51.8-5.2-7.1-10.4-14.2-15.4-21.4C27.6%20247.9%2016%20213.3%2016%20176%2016%2078.8%2094.8%200%20192%200s176%2078.8%20176%20176c0%2037.3-11.6%2071.9-31.4%20100.3-5%207.2-10.2%2014.3-15.4%2021.4-12.3%2016.8-24.6%2033.7-34.5%2051.8-5.9%2010.8-9.6%2022.5-11.8%2034.5h-48.6c2.6-18.7%207.9-38.6%2018.3-57.5%2011.5-20.9%2026.9-42.1%2039.8-59.8%204.7-6.4%209-12.4%2012.7-17.7zM192%20128c-26.5%200-48%2021.5-48%2048%200%208.8-7.2%2016-16%2016s-16-7.2-16-16c0-44.2%2035.8-80%2080-80%208.8%200%2016%207.2%2016%2016s-7.2%2016-16%2016m0%20384c-44.2%200-80-35.8-80-80v-16h160v16c0%2044.2-35.8%2080-80%2080%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/neoteroi-mkdocs.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="lumi-be" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#container-demo-1-fooocus" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LUMI-BE training materials" class="md-header__button md-logo" aria-label="LUMI-BE training materials" data-md-component="logo">
      
  
  <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   width="800"
   height="220"
   viewBox="0 0 211.66666 58.208333"
   version="1.1"
   id="svg1706"
   inkscape:version="1.2.2 (b0a84865, 2022-12-01)"
   sodipodi:docname="logo.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview1708"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="0.914906"
     inkscape:cx="372.16938"
     inkscape:cy="24.046186"
     inkscape:window-width="2400"
     inkscape:window-height="988"
     inkscape:window-x="767"
     inkscape:window-y="174"
     inkscape:window-maximized="0"
     inkscape:current-layer="layer1" />
  <defs
     id="defs1703" />
  <g
     inkscape:label="Laag 1"
     inkscape:groupmode="layer"
     id="layer1">
    <g
       aria-label="LUMI-BE"
       id="text4785"
       style="font-size:50.8px;line-height:1.25;-inkscape-font-specification:'sans-serif, Normal';fill:#f2f2f2;stroke-width:0.264583">
      <path
         d="M 23.366015,48.011253 H -7.4505806e-8 V 11.077074 H 4.911328 v 32.568554 h 18.454687 z"
         id="path6569" />
      <path
         d="m 56.083398,33.17805 q 0,4.01836 -0.892969,7.019727 -0.868164,2.976562 -2.877343,4.960937 -1.909961,1.885157 -4.464844,2.753321 -2.554883,0.868164 -5.953125,0.868164 -3.472656,0 -6.052344,-0.917774 -2.579687,-0.917773 -4.34082,-2.703711 -2.00918,-2.033984 -2.902148,-4.911328 -0.868164,-2.877343 -0.868164,-7.069336 V 11.077074 h 4.911328 v 22.349023 q 0,3.001367 0.396875,4.737696 0.421679,1.736328 1.389062,3.150195 1.091406,1.612304 2.951758,2.430859 1.885156,0.818555 4.514453,0.818555 2.654101,0 4.514453,-0.79375 1.860352,-0.818555 2.976562,-2.455664 0.967383,-1.413867 1.364258,-3.224609 0.42168,-1.835547 0.42168,-4.539258 V 11.077074 h 4.911328 z"
         id="path6571" />
      <path
         d="M 98.350579,48.011253 H 93.439251 V 16.18684 L 83.170111,37.841332 H 80.243158 L 70.048431,16.18684 V 48.011253 H 65.459564 V 11.077074 h 6.697266 l 9.84746,20.563086 9.525,-20.563086 h 6.821289 z"
         id="path6573" />
      <path
         d="m 121.29492,48.011253 h -14.58515 v -3.770312 h 4.83691 V 14.847387 h -4.83691 v -3.770313 h 14.58515 v 3.770313 h -4.83691 v 29.393554 h 4.83691 z"
         id="path6575" />
      <path
         d="m 143.22226,34.095824 h -15.47812 v -4.489648 h 15.47812 z"
         id="path6577" />
      <path
         d="m 179.83398,36.650707 q 0,2.75332 -1.0418,4.861718 -1.04179,2.108399 -2.80293,3.472657 -2.08359,1.637109 -4.58886,2.33164 -2.48047,0.694531 -6.3252,0.694531 H 151.97832 V 11.077074 h 10.93886 q 4.04317,0 6.05235,0.297656 2.00918,0.297657 3.84472,1.240235 2.03399,1.066601 2.95176,2.75332 0.91778,1.661914 0.91778,3.993555 0,2.629297 -1.33946,4.489648 -1.33945,1.835547 -3.57187,2.951758 v 0.198437 q 3.74551,0.768946 5.90351,3.299024 2.15801,2.505273 2.15801,6.35 z m -8.25996,-16.643945 q 0,-1.339454 -0.44648,-2.257227 -0.44649,-0.917773 -1.43868,-1.488281 -1.16582,-0.669727 -2.82773,-0.818555 -1.66191,-0.173633 -4.11758,-0.173633 h -5.8539 v 10.666016 h 6.35 q 2.30683,0 3.67109,-0.223242 1.36426,-0.248047 2.53008,-0.992188 1.16582,-0.74414 1.63711,-1.909961 0.49609,-1.190625 0.49609,-2.802929 z m 3.1502,16.842382 q 0,-2.232422 -0.66973,-3.54707 -0.66973,-1.314649 -2.43086,-2.232422 -1.19063,-0.620117 -2.90215,-0.79375 -1.68672,-0.198437 -4.11758,-0.198437 h -7.71425 v 13.741796 h 6.49882 q 3.22461,0 5.2834,-0.322461 2.05879,-0.347265 3.37344,-1.240234 1.38906,-0.967383 2.03398,-2.207617 0.64493,-1.240235 0.64493,-3.199805 z"
         id="path6579" />
      <path
         d="m 211.13749,48.011253 h -24.3334 V 11.077074 h 24.3334 v 4.365625 h -19.42207 v 10.120313 h 19.42207 v 4.365624 h -19.42207 v 13.716992 h 19.42207 z"
         id="path6581" />
    </g>
    <rect
       style="fill:#f2f2f2;stroke:none;stroke-width:0.988271;fill-opacity:1"
       id="rect4936"
       width="211.66667"
       height="3.175"
       x="0"
       y="0" />
    <rect
       style="fill:#f2f2f2;stroke:none;stroke-width:0.988271;fill-opacity:1"
       id="rect4936-7"
       width="211.66667"
       height="3.175"
       x="-8.3049135e-06"
       y="55.033333" />
  </g>
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LUMI-BE training materials
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Container demo 1
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LUMI-BE training materials" class="md-nav__button md-logo" aria-label="LUMI-BE training materials" data-md-component="logo">
      
  
  <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   width="800"
   height="220"
   viewBox="0 0 211.66666 58.208333"
   version="1.1"
   id="svg1706"
   inkscape:version="1.2.2 (b0a84865, 2022-12-01)"
   sodipodi:docname="logo.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview1708"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     showgrid="false"
     inkscape:zoom="0.914906"
     inkscape:cx="372.16938"
     inkscape:cy="24.046186"
     inkscape:window-width="2400"
     inkscape:window-height="988"
     inkscape:window-x="767"
     inkscape:window-y="174"
     inkscape:window-maximized="0"
     inkscape:current-layer="layer1" />
  <defs
     id="defs1703" />
  <g
     inkscape:label="Laag 1"
     inkscape:groupmode="layer"
     id="layer1">
    <g
       aria-label="LUMI-BE"
       id="text4785"
       style="font-size:50.8px;line-height:1.25;-inkscape-font-specification:'sans-serif, Normal';fill:#f2f2f2;stroke-width:0.264583">
      <path
         d="M 23.366015,48.011253 H -7.4505806e-8 V 11.077074 H 4.911328 v 32.568554 h 18.454687 z"
         id="path6569" />
      <path
         d="m 56.083398,33.17805 q 0,4.01836 -0.892969,7.019727 -0.868164,2.976562 -2.877343,4.960937 -1.909961,1.885157 -4.464844,2.753321 -2.554883,0.868164 -5.953125,0.868164 -3.472656,0 -6.052344,-0.917774 -2.579687,-0.917773 -4.34082,-2.703711 -2.00918,-2.033984 -2.902148,-4.911328 -0.868164,-2.877343 -0.868164,-7.069336 V 11.077074 h 4.911328 v 22.349023 q 0,3.001367 0.396875,4.737696 0.421679,1.736328 1.389062,3.150195 1.091406,1.612304 2.951758,2.430859 1.885156,0.818555 4.514453,0.818555 2.654101,0 4.514453,-0.79375 1.860352,-0.818555 2.976562,-2.455664 0.967383,-1.413867 1.364258,-3.224609 0.42168,-1.835547 0.42168,-4.539258 V 11.077074 h 4.911328 z"
         id="path6571" />
      <path
         d="M 98.350579,48.011253 H 93.439251 V 16.18684 L 83.170111,37.841332 H 80.243158 L 70.048431,16.18684 V 48.011253 H 65.459564 V 11.077074 h 6.697266 l 9.84746,20.563086 9.525,-20.563086 h 6.821289 z"
         id="path6573" />
      <path
         d="m 121.29492,48.011253 h -14.58515 v -3.770312 h 4.83691 V 14.847387 h -4.83691 v -3.770313 h 14.58515 v 3.770313 h -4.83691 v 29.393554 h 4.83691 z"
         id="path6575" />
      <path
         d="m 143.22226,34.095824 h -15.47812 v -4.489648 h 15.47812 z"
         id="path6577" />
      <path
         d="m 179.83398,36.650707 q 0,2.75332 -1.0418,4.861718 -1.04179,2.108399 -2.80293,3.472657 -2.08359,1.637109 -4.58886,2.33164 -2.48047,0.694531 -6.3252,0.694531 H 151.97832 V 11.077074 h 10.93886 q 4.04317,0 6.05235,0.297656 2.00918,0.297657 3.84472,1.240235 2.03399,1.066601 2.95176,2.75332 0.91778,1.661914 0.91778,3.993555 0,2.629297 -1.33946,4.489648 -1.33945,1.835547 -3.57187,2.951758 v 0.198437 q 3.74551,0.768946 5.90351,3.299024 2.15801,2.505273 2.15801,6.35 z m -8.25996,-16.643945 q 0,-1.339454 -0.44648,-2.257227 -0.44649,-0.917773 -1.43868,-1.488281 -1.16582,-0.669727 -2.82773,-0.818555 -1.66191,-0.173633 -4.11758,-0.173633 h -5.8539 v 10.666016 h 6.35 q 2.30683,0 3.67109,-0.223242 1.36426,-0.248047 2.53008,-0.992188 1.16582,-0.74414 1.63711,-1.909961 0.49609,-1.190625 0.49609,-2.802929 z m 3.1502,16.842382 q 0,-2.232422 -0.66973,-3.54707 -0.66973,-1.314649 -2.43086,-2.232422 -1.19063,-0.620117 -2.90215,-0.79375 -1.68672,-0.198437 -4.11758,-0.198437 h -7.71425 v 13.741796 h 6.49882 q 3.22461,0 5.2834,-0.322461 2.05879,-0.347265 3.37344,-1.240234 1.38906,-0.967383 2.03398,-2.207617 0.64493,-1.240235 0.64493,-3.199805 z"
         id="path6579" />
      <path
         d="m 211.13749,48.011253 h -24.3334 V 11.077074 h 24.3334 v 4.365625 h -19.42207 v 10.120313 h 19.42207 v 4.365624 h -19.42207 v 13.716992 h 19.42207 z"
         id="path6581" />
    </g>
    <rect
       style="fill:#f2f2f2;stroke:none;stroke-width:0.988271;fill-opacity:1"
       id="rect4936"
       width="211.66667"
       height="3.175"
       x="0"
       y="0" />
    <rect
       style="fill:#f2f2f2;stroke:none;stroke-width:0.988271;fill-opacity:1"
       id="rect4936-7"
       width="211.66667"
       height="3.175"
       x="-8.3049135e-06"
       y="55.033333" />
  </g>
</svg>

    </a>
    LUMI-BE training materials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    LUMI Intro (evolving)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            LUMI Intro (evolving)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intro to the notes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-CPE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Programming Environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-Access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-Modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-SoftwareStacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software stacks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-Support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-Slurm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Slurm on LUMI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-Binding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Binding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-Lustre/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lustre
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-ObjectStorage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LUMI-O
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-Containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Containers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Container demo 1
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Container demo 1
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#video-of-the-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Video of the demo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-fooocus" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Fooocus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing Fooocus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-checking-fooocus" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Checking Fooocus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-install-the-pytorch-container" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Install the PyTorch container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-adding-some-suse-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Adding some SUSE packages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-adding-python-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Adding Python packages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-reward-running-fooocus" class="md-nav__link">
    <span class="md-ellipsis">
      The reward: Running Fooocus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-way-of-running" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative way of running
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      Further discovery
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Demo2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Container demo 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../A01-SlurmIssues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A1 Slurm issues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../A02-Documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A2 Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#video-of-the-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Video of the demo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-fooocus" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Fooocus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing Fooocus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-checking-fooocus" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Checking Fooocus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-install-the-pytorch-container" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Install the PyTorch container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-adding-some-suse-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Adding some SUSE packages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-adding-python-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Adding Python packages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-reward-running-fooocus" class="md-nav__link">
    <span class="md-ellipsis">
      The reward: Running Fooocus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-way-of-running" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative way of running
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      Further discovery
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<p>Last update of this page: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 27, 2025 17:55:02">February 27, 2025</span></p>
<h1 id="container-demo-1-fooocus">Container demo 1: Fooocus<a class="headerlink" href="#container-demo-1-fooocus" title="Permanent link">&para;</a></h1>
<p><a href="https://github.com/lllyasviel/Fooocus">Fooocus</a> is an AI-based image generating
package that is available under the
<a href="https://github.com/lllyasviel/Fooocus/blob/main/LICENSE">GNU General Public License V3</a>.</p>
<p>The version on which we first prepared this demo,
insists on writing in the directories with some of the Fooocus files, so we cannot put
Fooocus in a container at the moment.</p>
<p>It is based on PyTorch. However, we cannot use the containers provided on LUMI as-is
as additional system level libraries are needed for the graphics.</p>
<p>This demo shows:</p>
<ul>
<li>
<p>Installing one of the containers provided on LUMI with EasyBuild,</p>
</li>
<li>
<p>Installing additional software in the container with the
    <a href="https://docs.sylabs.io/guides/3.11/user-guide/build_a_container.html#unprivilged-proot-builds">SingularityCE "unprivileged proot builds" process</a>
    and the SUSE Linux <code>zypper</code> install tool,</p>
</li>
<li>
<p>Further adding packages in a virtual environment and putting them in 
    a SquashFS file for better file system performance, and</p>
</li>
<li>
<p>Using that setup with Fooocus.</p>
</li>
</ul>
<h2 id="video-of-the-demo">Video of the demo<a class="headerlink" href="#video-of-the-demo" title="Permanent link">&para;</a></h2>
<p>This is a video for a previous version of the demo though.</p>
<video src="https://465000095.lumidata.eu/training-materials-web/intro-evolving/recordings/Demo1-Fooocus.mp4" controls="controls">
</video>

<h2 id="installing-fooocus">Installing Fooocus<a class="headerlink" href="#installing-fooocus" title="Permanent link">&para;</a></h2>
<h3 id="step-1-checking-fooocus">Step 1: Checking Fooocus<a class="headerlink" href="#step-1-checking-fooocus" title="Permanent link">&para;</a></h3>
<p>Let's create an installation directory for the demo. Set the environment variable
<code>installdir</code> to a proper value for the directories on LUMI that you have access to.</p>
<div class="highlight"><pre><span></span><code><span class="nv">installdir</span><span class="o">=</span>/scratch/project_465001726/<span class="nv">$USER</span>/DEMO1
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$installdir</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$installdir</span><span class="s2">&quot;</span>
</code></pre></div>
<p>We are now in the installation directory of which we also ensured its existence first.
Let's now download and unpack Fooocus release 2.5.5 (the one we tested for this demo)</p>
<div class="highlight"><pre><span></span><code><span class="nv">fooocusversion</span><span class="o">=</span><span class="m">2</span>.5.5
wget<span class="w"> </span>https://github.com/lllyasviel/Fooocus/archive/refs/tags/v<span class="nv">$fooocusversion</span>.zip
unzip<span class="w"> </span>v<span class="nv">$fooocusversion</span>.zip
rm<span class="w"> </span>-f<span class="w"> </span>v<span class="nv">$fooocusversion</span>.zip
</code></pre></div>
<p>If we check what's in the Fooocus directory:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>Fooocus-<span class="nv">$fooocusversion</span>
</code></pre></div>
<p>we see a rather messy bunch of mostly Python files missing the traditional setup scripts that you 
expect with a Python package. So installing this could become a messy thing...</p>
<p>It also contains a <code>Dockerfile</code> (to build a base Docker container), a <code>requirements_docker.txt</code>
and a <code>requirements_versions.txt</code> file that give hints about what exactly is needed. 
The <code>Dockerfile</code> suggests close to the top that some OpenGL libraries will be needed.
And the fact that it can be fully installed in a docker container also indicates that there
must in fact be ways to run it in readonly directories, but in this demo we'll put Fooocus in
a place were it can write. The <code>requirements_docker.txt</code> file also suggests to use Pytorch 2.1.0, but
we'll take some risks though and use a newer version of PyTorch than suggested as for AMD GPUs
it is often important to use recently enough versions (and because that version has a more sophisticated
module better suited for what we want to demonstrate). </p>
<h3 id="step-2-install-the-pytorch-container">Step 2: Install the PyTorch container<a class="headerlink" href="#step-2-install-the-pytorch-container" title="Permanent link">&para;</a></h3>
<p>We can find an overview of the available PyTorch containers on the
<a href="https://lumi-supercomputer.github.io/LUMI-EasyBuild-docs/p/PyTorch/">PyTorch page in the LUMI Software Library</a>.
We'll use a version that already has support for Python virtual environments built in as that 
will make it a lot easier to install extra Python packages. Moreover, as we have also seen that we will
need to change the container, we'll follow a somewhat atypical build process.</p>
<p>Rather than installing directly from the available EasyBuild recipes, we'll edit an EasyConfig
to change the name to reflect that we have made changes and installed Fooocus with it.
First we must prepare a temporary directory to do this work and also set up EasyBuild:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$installdir</span><span class="s2">/tmp&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$installdir</span><span class="s2">/tmp&quot;</span>
module<span class="w"> </span>purge
module<span class="w"> </span>load<span class="w"> </span>LUMI/24.03<span class="w"> </span>partition/container<span class="w"> </span>EasyBuild-user
</code></pre></div>
<p>We'll now use a function of EasyBuild to copy an existing EasyConfig file to a new location, and
rename it in one move to reflect the module version that we want:</p>
<div class="highlight"><pre><span></span><code>eb<span class="w"> </span>--copy-ec<span class="w"> </span>PyTorch-2.3.1-rocm-6.0.3-python-3.12-singularity-20240923.eb<span class="w"> </span>PyTorch-2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923.eb
</code></pre></div>
<p>This is not enough to generate a module <code>PyTorch/2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923</code>, 
we also need to edit the <code>versionsuffix</code> line in the EasyBuild recipe. Of course you can do this easily with
your favourite editor, but to avoid errors we'll use a command for the demo that you only need to copy:</p>
<div class="highlight"><pre><span></span><code>sed<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;s|^\(versionsuffix.*\)-singularity-\(.*\)|\1-Fooocus-singularity-\2|&quot;</span><span class="w"> </span>-i<span class="w"> </span>PyTorch-2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923.eb
</code></pre></div>
<p>Let's check:</p>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>versionsuffix<span class="w"> </span>PyTorch-2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923.eb
</code></pre></div>
<p>which returns</p>
<div class="highlight"><pre><span></span><code>versionsuffix = f&#39;-rocm-{local_c_rocm_version}-python-{local_c_python_mm}-Fooocus-singularity-{local_c_date}&#39;
</code></pre></div>
<p>so we see that the <code>versionsuffix</code> line looks rather strange but we do see that the <code>-Fooocus-</code> part is injected
in the name so we assume everything is OK.</p>
<p>We're now ready to install the container with EasyBuild:</p>
<div class="highlight"><pre><span></span><code>eb<span class="w"> </span>PyTorch-2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923.eb
</code></pre></div>
<p>The documentation in the PyTorch page in the LUMI Software Library suggests that we can now delete the
container file in the installation directory, but this is a bad idea in this case as we want to build our
own container and hence will not use one of the containers provided on the system while running.</p>
<p>We're now finished with EasyBuild so don't need the modules related to EasyBuild anymore. So lets's clean
the environment an load the PyTorch container module that we just built with EasyBuild:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>purge
module<span class="w"> </span>load<span class="w"> </span>LUMI/24.03
module<span class="w"> </span>load<span class="w"> </span>PyTorch/2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923
</code></pre></div>
<p>Notice that we don't need to load <code>partition/container</code> anymore. Any partition would do, and in fact, we can 
even use <code>CrayEnv</code> instead of <code>LUMI/24.03</code>.</p>
<p>Notice that the container module provides the environment variables <code>SIF</code> and <code>SIFPYTORCH</code>, both of which 
point to the <code>.sif</code> file of the container:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$SIF</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$SIFPYTORCH</span>
</code></pre></div>
<p>We'll make use of that when we add SUSE packages to the container.</p>
<h3 id="step-3-adding-some-suse-packages">Step 3: Adding some SUSE packages<a class="headerlink" href="#step-3-adding-some-suse-packages" title="Permanent link">&para;</a></h3>
<p>To update the singularity container, we need three things.</p>
<p>First, the <code>PyTorch</code> module cannot be loaded as it sets a number of singularity-related 
environment variables. Yet we want to use the value of <code>SIF</code>, so we will simply save it in
a different environment variable before unloading the module:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">CONTAINERFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$SIF</span><span class="s2">&quot;</span>
module<span class="w"> </span>unload<span class="w"> </span>PyTorch/2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923
</code></pre></div>
<p>Second, the <code>proot</code> command is not available by default on LUMI, but it can be enabled by loading
the <code>systools</code> module in <code>LUMI/23.09</code> or newer stacks, or <code>systools/23.09</code> or newer in <code>CrayEnv</code>:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>systools
</code></pre></div>
<p>Third, we need a file defining the build process for singularity. This is a bit technical and outside
the scope of this tutorial to explain what goes into this file. It can be created with the following shell
command:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>&gt;<span class="w"> </span>lumi-pytorch-rocm-6.0.3-python-3.10-pytorch-v2.3.1-Fooocus.def<span class="w"> </span><span class="s">&lt;&lt;EOF</span>

<span class="s">Bootstrap: localimage</span>

<span class="s">From: $CONTAINERFILE</span>

<span class="s">%post</span>

<span class="s">zypper -n install -y Mesa libglvnd libgthread-2_0-0 hostname</span>

<span class="s">EOF</span>
</code></pre></div>
<p>You can check the file with</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>lumi-pytorch-rocm-6.0.3-python-3.10-pytorch-v2.3.1-Fooocus.def
</code></pre></div>
<p>We basically install an OpenGL library that emulates on the CPU and some missing tools.
Note that the AMD MI250X GPUs are not rendering GPUs, so we cannot run hardware accelerated
rendering on them.</p>
<p>An annoying element of the singularity build procedure is that it is not very friendly for
a Lustre filesystem. We'll do the build process on a login node, where we have access
to a personal RAM disk area that will also be cleaned automatically when we log out, which is always
useful for a demo. Therefore we need to set two environment variables for Singularity, and
create two directories, which is done with the following commands:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">SINGULARITY_CACHEDIR</span><span class="o">=</span>/tmp/singularity/cache
<span class="nb">export</span><span class="w"> </span><span class="nv">SINGULARITY_TMPDIR</span><span class="o">=</span>/tmp/singularity/tmp

mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$SINGULARITY_CACHEDIR</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$SINGULARITY_TMPDIR</span>
</code></pre></div>
<p>Note that <code>$SINGULARITY_TMPDIR</code> can contain a lot of files during the <code>singularity build</code> process
as the container will be unpacked in this area.</p>
<p>Now we're ready to do the actual magic and rebuild the container with additional packages
installed in it:</p>
<div class="highlight"><pre><span></span><code>singularity<span class="w"> </span>build<span class="w"> </span><span class="nv">$CONTAINERFILE</span><span class="w"> </span>lumi-pytorch-rocm-6.0.3-python-3.10-pytorch-v2.3.1-Fooocus.def
</code></pre></div>
<p>The build process will ask you if you want to continue as it will overwrite the container file,
so confirm with <code>y</code>. The whole build process may take a couple of minutes.</p>
<p>We'll be kind to our fellow LUMI users and already clean up the directories that we just created:</p>
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>-rf<span class="w"> </span>/tmp/singularity
</code></pre></div>
<p>Let's reload the container:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>PyTorch/2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923
</code></pre></div>
<p>and do some checks:</p>
<div class="highlight"><pre><span></span><code>singularity<span class="w"> </span>shell<span class="w"> </span><span class="nv">$SIF</span>
</code></pre></div>
<p>brings us into the container (note that the command prompt has changed).</p>
<p>The command</p>
<div class="highlight"><pre><span></span><code>which<span class="w"> </span>python
</code></pre></div>
<p>returns</p>
<div class="highlight"><pre><span></span><code>/user-software/venv/pytorch/bin/python
</code></pre></div>
<p>which shows that the virtual environment pre-installed in the container is indeed active.</p>
<p>We do have the hostname command in the container (one of the packages mentioned in the
container <code>.def</code> file that we created) as is easily tested:</p>
<div class="highlight"><pre><span></span><code>hostname
</code></pre></div>
<p>and</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>/usr/lib64/*mesa*
</code></pre></div>
<p>shows that indeed a number of MESA libraries are installed (the OpenGL installation that we did).</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>list
</code></pre></div>
<p>shows that there are already a lot of Python packages in the container.</p>
<p>We can now leave the container with the </p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<p>command (or CTRL-D key combination).</p>
<p>So it looks we are ready to start installing Python packages...</p>
<h3 id="step-4-adding-python-packages">Step 4: Adding Python packages<a class="headerlink" href="#step-4-adding-python-packages" title="Permanent link">&para;</a></h3>
<p>To install the packages, we'll base ourselves on the <code>requirements_versions.txt</code> file which we found in the
Fooocus directories. We'll omit packages that have close enough versions and are already in the container.
The installation has to happen from within the container though. So let's got
to the Fooocus directory and go into the container again:</p>
<p>First we copy the <code>requirements_versions.txt</code> file from the Fooocus directory and 
edit it a bit:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$installdir</span>
cp<span class="w"> </span>Fooocus-<span class="nv">$fooocusversion</span>/requirements_versions.txt<span class="w"> </span>requirements.txt
</code></pre></div>
<p>and edit it to</p>
<div class="highlight"><pre><span></span><code>torchsde==0.2.6
transformers==4.42.4
omegaconf==2.3.0
gradio==3.41.2
pygit2==1.15.1
opencv-contrib-python-headless==4.10.0.84
httpx==0.27.0
onnxruntime==1.18.1
timm==1.0.7
rembg==2.0.57
groundingdino-py==0.4.0
segment_anything==1.0
</code></pre></div>
<p>(i.e., delete the lines for <code>einops</code>,  <code>safetensors</code>, <code>accelerate</code>, <code>pyyamml</code>, <code>pillow</code>,
<code>scipy</code>, <code>tqdm</code>, <code>psutil</code>, <code>pytorch_lightning</code>, <code>numpy</code>, <code>tokenizers</code> and <code>packaging</code>).
Even though there is already a version of <code>transformers</code> in the package, it is too old
and Fooocus is rather picky so we leave that line in.</p>
<p>Alternatively, you can simply create the file by copying the following command:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">torchsde==0.2.6</span>
<span class="s">transformers==4.42.4</span>
<span class="s">omegaconf==2.3.0</span>
<span class="s">gradio==3.41.2</span>
<span class="s">pygit2==1.15.1</span>
<span class="s">opencv-contrib-python-headless==4.10.0.84</span>
<span class="s">httpx==0.27.0</span>
<span class="s">onnxruntime==1.18.1</span>
<span class="s">timm==1.0.7</span>
<span class="s">rembg==2.0.57</span>
<span class="s">groundingdino-py==0.4.0</span>
<span class="s">segment_anything==1.0</span>
<span class="s">EOF</span>
</code></pre></div>
<p>Now go back into the container:</p>
<div class="highlight"><pre><span></span><code>singularity<span class="w"> </span>shell<span class="w"> </span><span class="nv">$SIF</span>
</code></pre></div>
<p>We'll install the extra packages simply with the <code>pip</code> tool:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>
<p>This process may again take a few minutes.</p>
<p>An error message suggests that there are some problems with the container that we used
which are solved with</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>lightning-utilities<span class="w"> </span>torchmetrics
</code></pre></div>
<p>After finishing,</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>/user-software/venv/pytorch/lib/python3.12/site-packages/
</code></pre></div>
<p>shows that indeed a lot of packages have been installed. Though accessible from the container,
they are not in the container <code>.sif</code> file as that file cannot be written.</p>
<p>Let's leave the container again:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<p>Now try:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span><span class="nv">$CONTAINERROOT</span>/user-software/venv/pytorch/lib/python3.12/site-packages/
</code></pre></div>
<p>and notice that we see the same long list of packages. In fact, a trick to see the number of files 
and directories is</p>
<div class="highlight"><pre><span></span><code>lfs<span class="w"> </span>find<span class="w"> </span><span class="nv">$CONTAINERROOT</span>/user-software/venv/pytorch/lib/python3.12/site-packages<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</code></pre></div>
<p>which prints the name of all files and directories and then counts the number of lines, and we see that 
this is a considerable number. Lustre isn't really that fond of it. However, the module also provides an
easy solution: We can convert the <code>$EBROOTPYTORCH/user-software</code> subdirectory into a SquashFS file that can
be mounted as a filesystem in the container, and the module provides all the tools to make this easy to do.
All we need to do is to run</p>
<div class="highlight"><pre><span></span><code>make-squashfs
</code></pre></div>
<p>This will also take some time as the script limits the resources the <code>make-squashfs</code> can use to keep the 
load on the login nodes low.
Now we can then safely remove the <code>user-software</code> subdirectory:</p>
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$CONTAINERROOT</span>/user-software
</code></pre></div>
<p>Before continuing, we do need to reload the module so that the bindings between the container and
files and directories on LUMI are reset:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>PyTorch/2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923
</code></pre></div>
<p>Just check</p>
<div class="highlight"><pre><span></span><code>singularity<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="nv">$SIF</span><span class="w"> </span>ls<span class="w"> </span>/user-software/venv/pytorch/lib/python3.12/site-packages
</code></pre></div>
<p>and see that our package installation is still there!</p>
<p>However, we can no longer write in that directory. E.g., try</p>
<div class="highlight"><pre><span></span><code>singularity<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="nv">$SIF</span><span class="w"> </span>touch<span class="w"> </span>/user-software/test
</code></pre></div>
<p>to create an empty file <code>test</code> in <code>/user-software</code> and note that we get an error message.</p>
<p>So now we are ready-to-run.</p>
<h3 id="the-reward-running-fooocus">The reward: Running Fooocus<a class="headerlink" href="#the-reward-running-fooocus" title="Permanent link">&para;</a></h3>
<p>First go into the directory containing the Fooocus package :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$installdir</span><span class="s2">/Fooocus-</span><span class="nv">$fooocusversion</span><span class="s2">&quot;</span>
</code></pre></div>
<p>We'll start an interactive job with a single GPU:</p>
<div class="highlight"><pre><span></span><code>srun<span class="w"> </span>-psmall-g<span class="w"> </span>-n1<span class="w"> </span>-c7<span class="w"> </span>--time<span class="o">=</span><span class="m">30</span>:00<span class="w"> </span>--gpus<span class="o">=</span><span class="m">1</span><span class="w"> </span>--mem<span class="o">=</span>60G<span class="w"> </span>-A<span class="w"> </span>project_465001726<span class="w"> </span>--pty<span class="w"> </span>bash
</code></pre></div>
<p>The necessary modules will still be available, but if you are running from a new shell, you 
can load them again:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>LUMI/24.03
module<span class="w"> </span>load<span class="w"> </span>PyTorch/2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923
</code></pre></div>
<p>Also check the hostname if it is not part of your prompt as you will need it later:</p>
<div class="highlight"><pre><span></span><code>hostname
</code></pre></div>
<p>We can now go into the container:</p>
<div class="highlight"><pre><span></span><code>singularity<span class="w"> </span>shell<span class="w"> </span><span class="nv">$SIF</span>
</code></pre></div>
<p>and launch Fooocus:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>launch.py<span class="w"> </span>--listen<span class="w"> </span>--disable-xformers
</code></pre></div>
<p>Fooocus provides a web interface. If you're the only one on the node using Fooocus, it should run
on port 7865. To access it from our laptop, we need to create an SSH tunnel to LUMI. The precise statement
needed for this will depend on your ssh implementation. With an OpenSSH-like client, you can use:</p>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>-N<span class="w"> </span>-L<span class="w"> </span><span class="m">7865</span>:nid00XXXX:7865<span class="w"> </span>&lt;myusername&gt;@lumi.csc.fi
</code></pre></div>
<p><strong>replacing with the node name that we got from the <code>hostname</code> command<code>,</code><mysuername>` with your
username on LUMI and adding command line options to point to your key if needed.</strong></p>
<p>Next, simply open a web browser on your laptop and point to </p>
<div class="highlight"><pre><span></span><code>http://localhost:7865
</code></pre></div>
<p>Note though that the initialisation of Fooocus can take a while and you cannot connect to it as long
as a line similar to</p>
<div class="highlight"><pre><span></span><code>App started successful. Use the app with http://localhost:7865/ or 0.0.0.0:7865
</code></pre></div>
<p>is shown.</p>
<h3 id="alternative-way-of-running">Alternative way of running<a class="headerlink" href="#alternative-way-of-running" title="Permanent link">&para;</a></h3>
<p>We can also launch Fooocus directly from the <code>srun</code> command, e.g., from the directory containing the 
Fooocus code,</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>LUMI/24.03
module<span class="w"> </span>load<span class="w"> </span>PyTorch/2.3.1-rocm-6.0.3-python-3.12-Fooocus-singularity-20240923
srun<span class="w"> </span>-psmall-g<span class="w"> </span>-n1<span class="w"> </span>-c7<span class="w"> </span>--time<span class="o">=</span><span class="m">30</span>:00<span class="w"> </span>--gpus<span class="o">=</span><span class="m">1</span><span class="w"> </span>--mem<span class="o">=</span>60G<span class="w"> </span>-A<span class="w"> </span>project_465001726<span class="w"> </span>--pty<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;echo -e &quot;Running on $(hostname)\n&quot; ; singularity exec $SIF python launch.py --listen --disable-xformers&#39;</span>
</code></pre></div>
<p>It will also print the host name on which the Fooocus is running, so you can connect to Fooocus using the
same procedure as above.</p>
<h2 id="further-discovery">Further discovery<a class="headerlink" href="#further-discovery" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://www.youtube.com/@JumpIntoAI">YouTube channel "Jump Into AI"</a>
    has a <a href="https://www.youtube.com/playlist?list=PLK9cwl_eT4jKM-VwOm3zHl0lCFNnbwMD6">Fooocus playlist</a></li>
</ul>
<!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Render date of last update -->


<!-- Render date of creation -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render authors -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render committers from GitHub -->


<!-- Render committers from GitLab -->


<!-- Render committers -->


<!-- ---------------------------------------------------------------------- -->

<!-- Determine date of last update -->

  
    
  

  <!-- Determine date of creation -->
  


<!-- Source file information -->

  <aside class="md-source-file">

    <!-- Date of last update -->
    <!-- 
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 27, 2025 17:55:02">February 27, 2025</span>
  </span>

     -->

    <!-- Date of creation -->
    

    <!-- Authors (git-authors plugin) -->
    

    <!-- Authors (git-committers plugin) -->
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        

<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
          <img alt="Creative Commons License" 
              style="border-width:0" 
              src="https://i.creativecommons.org/l/by/4.0/80x15.png"
          />
        </a>
        This work is licensed under a&nbsp;
        <a rel="license" 
          href="http://creativecommons.org/licenses/by/4.0/"
        >
          Creative Commons Attribution 4.0 International License
        </a>
      </div>      
      <div class="md-social">
  
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "navigation.indexes", "header.autohide", "toc.follow", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>